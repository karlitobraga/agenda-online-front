<div class="settings-container">
    <div class="header">
        <h1>Gerenciar Produtos</h1>
        <button mat-flat-button color="primary" (click)="openProductDialog()">
            <mat-icon>add</mat-icon> Novo Produto
        </button>
    </div>

    <div class="product-grid" *ngIf="products.length > 0; else noData">
        <mat-card *ngFor="let product of products" class="product-card" [class.low-stock]="product.stock <= 5">
            <mat-card-header>
                <div mat-card-avatar class="product-icon">
                    <mat-icon>inventory_2</mat-icon>
                </div>
                <mat-card-title>{{ product.name }}</mat-card-title>
                <mat-card-subtitle>{{ product.description || 'Sem descrição' }}</mat-card-subtitle>
            </mat-card-header>

            <mat-card-content>
                <div class="stats-row">
                    <div class="stat">
                        <span class="label">Venda</span>
                        <span class="value">{{ product.price | currency:'BRL' }}</span>
                    </div>
                    <div class="stat">
                        <span class="label">Custo</span>
                        <span class="value secondary">{{ product.cost | currency:'BRL' }}</span>
                    </div>
                </div>
                
                <div class="stock-badge" [class.warning]="product.stock <= 5" [class.danger]="product.stock === 0">
                    <mat-icon>{{ product.stock > 0 ? 'inventory' : 'block' }}</mat-icon>
                    <span>Estoque: <strong>{{ product.stock }}</strong></span>
                </div>
            </mat-card-content>

            <mat-card-actions align="end">
                <button mat-icon-button color="primary" (click)="openProductDialog(product)" title="Editar">
                    <mat-icon>edit</mat-icon>
                </button>
                <button mat-icon-button color="warn" (click)="deleteProduct(product)" title="Excluir">
                    <mat-icon>delete</mat-icon>
                </button>
            </mat-card-actions>
        </mat-card>
    </div>

    <ng-template #noData>
        <div class="empty-state">
            <mat-icon>production_quantity_limits</mat-icon>
            <p>Nenhum produto cadastrado.</p>
        </div>
    </ng-template>
</div>